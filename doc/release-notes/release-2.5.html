<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Squid 2.5 release notes</TITLE>


</HEAD>
<BODY>
<H1>Squid 2.5 release notes</H1>

<H2>Squid Developers</H2>$Id$
<P><HR>
<EM>This document contains the release notes for version 2.5 of Squid.
Squid is a WWW Cache application developed by the National Laboratory
for Applied Network Research and members of the Web Caching community.</EM>
<HR>
<H2><A NAME="s1">1. Key changes squid-2.5.STABLE1 to 2.5.STABLE2:</A></H2>

<P>
<UL>
<LI>authentication now works in most access directives if
first enforced in http_access</LI>
<LI>contrib files included in the distribution again</LI>
<LI>aufs bugfixes to address both stability and data
corruption issues, and some aufs performance improvements.</LI>
<LI>now possible to specify acl values with spaces in them
via the "include file" technique</LI>
<LI>winbind helpers updated to work out of the box with Samba-2.2.6
or later Samba-2.2.X releases. Current stable Samba release at time of
this writing is 2.2.7a.</LI>
<LI>squid_ldap_group updated to correctly handle LDAP groups</LI>
<LI>new experimental configure option --disable-hostname-checks to make Squid not validate that received hostnames are valid for use within HTTP. Required to participate in testbeds for international domain names etc.</LI>
<LI>several assertion or segmentation faults corrected</LI>
<LI>a large number of minor bugfixes. See the list of 
<A HREF="http://www.squid-cache.org/Versions/v2/2.5/bugs/#STABLE1">squid-2.5.STABLE1 patches</A> for details.</LI>
</UL>
<P>
<H2><A NAME="s2">2. Key changes from squid 2.4:</A></H2>

<P>
<UL>
<LI>Major rewrite of proxy authentication to support other schemes
than basic. First in the line is NTLM support but others can
easily be added (minimal digest is present). See the Programmers
Guide for the internals.
Thanks to the SAMBA team for some excellent collaboration on the
NTLM support!
(Robert Collins &amp; Francesco Chemolli)</LI>
<LI>Optimized searching in proxy_auth and ident ACL types. Squid
should now handle large access lists a lot more efficiently.
(Francesco Chemolli)</LI>
<LI>Fixed forwarding/peer loop detection code (Brian Degenhardt) -
now a peer is ignored if it turns out to be us, rather than
committing suicide</LI>
<LI>Changed the internal URL code to obey appendDomain for
internal objects if it needs appending. This fixes weirdnesses
where a machine can think it is "foo.bar.com", and "foo" is
requested.
(Brian Degenhardt)</LI>
<LI>Added the use of Automake to create the Makefile.in's in the
squid source tree. This will allow libtool in the future, and
immediately allows better dependency tracking - with or 
without gcc - as well as the dist-all and distcheck targets
for developers which respectively build a tar.gz and a tar.bz2
distribution, and check that what will be distributed builds.
(Robert Collins)</LI>
<LI>Added TOS and source address selection based on ACLs,
written by Roger Venning. This allows administrators to set
the TOS precedence bits and/or the source IP from a set of
available IPs based upon some ACLs, generally to map different
users to different outgoing links and traffic profiles.</LI>
<LI>Added 'max-conn' option to 'cache_peer'</LI>
<LI>Added SSL gatewaying support, allowing Squid to act as a SSL
server in accelerator setups.</LI>
<LI>Many new authentication helpers.</LI>
<LI>no_cache now applies to cache hits as well as cache misses</LI>
<LI>the Gopher client in Squid has been significantly improved</LI>
<LI>Squid now sanity checks FTP data connections to ensure the
connection is from the requested server. Can be disabled if
needed by turning off the ftp_sanitycheck option.</LI>
<LI>external acl support. A mechanism where flexible ACL checks
can be driven by external helpers. See the external_acl_type
and acl external directives. (MARA Systems AB)</LI>
<LI>Countless other small things and fixes</LI>
<LI>HTML pages generated by Squid or CacheMgr as well as the
ERR documents now contain a doctype declaration so that
browsers know which HTML specification the document uses.
In addition to that they have a new look
(background-color, font) and are valid according to the HTML
standards at www.w3.org.
(Clemens Löser)</LI>
<LI>Login and password send to Basic auth helpers is now URL
escaped to allow for spaces and other "odd" characters in
logins and passwords</LI>
<LI>Proxy Authentication is no longer blindly forwarded to peer
caches if not used locally. If forwarding of proxy authentication
is desired then it must now be configured with the login=PASS
cache_peer option.</LI>
<LI>Responses with Vary: in the header are now cached by squid.
(Henrik Nordstrom).</LI>
<LI>Support for openBSD pf interface in interception mode.</LI>
<LI>It is now possible to send complex arguments to helpers
by quoting the arguments by " and/or \ </LI>
<LI>The directory structure has changed slightly. The squid binary
has been moved into sbin, errors and icons into share/, and the libexec
programs are now in libexec/ (was previously libexec/squid/). See
configure --help for instructions on how to move these around to
exacly where you want to have them in your system.</LI>
</UL>
<P>
<H2><A NAME="s3">3. Changes to squid.conf</A></H2>

<P>
<DL>
<DT><B>http_port</B><DD><P>Allows ip address specification.
<DT><B>https_port</B><DD><P>This is an option for use with SSL acceleration - it determines where squid listens for SSL requests.
<DT><B>ssl_unclean_shutdown</B><DD><P>This is used to handle some bugs in browsers that don't fully support SSL.
<DT><B>tcp_incoming_address</B><DD><P>This has been removed - use the http_port line to specify ip address's.
<DT><B>cache_peer</B><DD><P>login= has been extended to allow pass through authentication, fixed password authentication and maximum connection limits.
<DT><B>hosts_file</B><DD><P>Directs squid to read in a set of name-address associations upon startup and reconfiguration.
<DT><B>authenticate_program</B><DD><P>
<DT><B>authenticate_children</B><DD><P>
<DT><B>proxy_auth_realm</B><DD><P>Removed. See auth_param.
<DT><B>auth_param</B><DD><P>This replaces the authenticate_program directive. It allows configuration of multiple authentication helpers, one for each of the supported authentication schemes. Such schemes include "NTLM", "Digest (from RFC 2617)", and "Basic".
<DT><B>authenticate_cache_garbage_interval</B><DD><P>This directive sets the garbage collection interval for the authentication cache.
<DT><B>external_acl_type</B><DD><P>This directive configures the new external ACL Helper interface. VERY useful for authenticating by group membership - i.e. from an LDAP server or NT domain.
<DT><B>request_body_max_size</B><DD><P>The default for this is now 0 - unlimited.
<DT><B>reply_body_max_size</B><DD><P>Now multiple size limits are allowed based on ACL lists.
<DT><B>refresh_pattern</B><DD><P>The default is now blank - users must uncomment the suggested default to use it. This allows the use of a blank refresh pattern if desired.
<DT><B>request_timeout</B><DD><P>Raised the default to 5 minutes.
<DT><B>persistent_request_timeout</B><DD><P>New directive - how long to wait after a reply is completed before closing the connection.
<DT><B>acl</B><DD><P>New acl types
<UL>
<LI>referer_regex (match Referer headers),</LI>
<LI>max_user_ip (limit concurrent IP's a single user may use)</LI>
<LI>rep_mime_type (filter replies based on their content type).</LI>
<LI>external (use an external helper)</LI>
</UL>
<DT><B>http_reply_access</B><DD><P>Limit HTTP replies based on ACL's. This is complementary to http_access.
<DT><B>tcp_outgoing_tos</B><DD><P>
<DT><B>tcp_outgoing_ds</B><DD><P>
<DT><B>tcp_outgoing_dscp</B><DD><P>These three directives allow marking of outbound connections at the IP level - i.e. for choosing routes based on the usercode.
<DT><B>tcp_outgoing_address</B><DD><P>Allows mapping of requests onto specific outbound IP address's.
<DT><B>anonymize_headers</B><DD><P>Removed. See header_access.
<DT><B>header_access</B><DD><P>Allow granular filtering of HTTP headers.
<DT><B>header_replace</B><DD><P>Replace specific headers with custom values.
<DT><B>pipeline_prefetch</B><DD><P>Now defaults to off for bandwidth management and access logging reasons.
<DT><B>vary_ignore_expire</B><DD><P>Enables a workaround for web servers that immediately expire Varied objects because they think squid is unable to handle Vary:.
<DT><B>sleep_after_fork</B><DD><P>Give the OS a small amount of time to accomodate the fork+exec used to launch helpers - if squid has a lot of virtual memory allocated the OS may run out of virtual memory during helper spawning otherwise.
<DT><B>reference_age</B><DD><P>This has been removed - starting with Squid-2.4 this directive have had no effect and has now been fully removed to avoid confusion.
<DT><B>siteselect_timeout</B><DD><P>This has been removed - it is not referenced anywhere in the source code.
</DL>
<P>
<H2><A NAME="s4">4. Known limitations</A></H2>

<P>There is a few limitations to this version of Squid that we hope to correct in a later release
<P>
<DL>
<DT><B>deny_info</B><DD><P>deny_info only works for http_access, not for the acls listen in http_reply_access 
</DL>
<P>
</BODY>
</HTML>
