##
## Makefile for libsnmp.
## 
## because this is for Linux with ELF only, we are building 
## a shared lib, to be installed in /lib.
##

## set to installation prefix (overridden by configure --prefix=path):

prefix		= @prefix@

VERSION		= 3.4
ALIB		= libsnmp.a

TARG		= @SNMPLIB@

CSRCS		= snmp_client.c snmp.c snmp_auth.c asn1.c mib.c
		  parse.c snmp_api.c usec.c snmpdump.c
OBJS		= snmp_client.o snmp.o snmp_auth.o asn1.o mib.o
		  parse.o snmp_api.o usec.o snmpdump.o

CC		= @CC@
AR_R		= @AR_R@
RANLIB		= @RANLIB@
AC_CFLAGS	= @CFLAGS@
DEFS		= -DSQUID_SNMP=1
INCLUDE		= -I../include -I$(srcdir)/../include
MIBDEFS		= -DMIBFILEPATH=\"$(prefix)/lib\"
CFLAGS		= $(AC_FLAGS) $(DEFS) $(INCLUDE)


all:	$(TARG)

install: all

$(ALIB):    ${OBJS}
	$(AR_R) $(ALIB) ${OBJS}
	$(RANLIB) $(ALIB)

##
## special rule to include -DMIBFILEPATH=...:
##
mib.o:		mib.c
	$(CC) $(CFLAGS) $(MIBDEFS)	-c mib.c 

distclean: clean
	-rm -f Makefile

clean:
	rm -f core *.o ${TARG} shared/*.o *.a
