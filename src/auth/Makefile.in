#  Makefile for authentication modules in the Squid Object Cache server
#
#  $Id$
#

SUBDIRS		= @AUTH_MODULES@
OUTLIBS		= @AUTH_LIBS@

all install:
	@test -z "$(SUBDIRS)" || for dir in $(SUBDIRS); do \
           sh -c "cd $$dir && $(MAKE) $(MFLAGS) $@" || exit 1; \
        done; 

$(OUTLIBS):
	@sh -c "cd `basename $@ .a` && $(MAKE) $(MFLAGS) ../$@"

clean:
	-rm -f *.a stamp
	-for dir in *; do \
            if [ -f $$dir/Makefile ]; then \
               sh -c "cd $$dir && $(MAKE) $(MFLAGS) $@" || exit 1;\
            fi; \
        done

distclean:
	-rm -f *.a Makefile
	-for dir in *; do \
            if [ -f $$dir/Makefile ]; then \
                sh -c "cd $$dir && $(MAKE) $(MFLAGS) distclean"; \
            fi; \
        done

.DEFAULT:
	@test -z "$(SUBDIRS)" || for dir in $(SUBDIRS); do \
           sh -c "cd $$dir && $(MAKE) $(MFLAGS) $@" || exit 1; \
        done
