#summary Changes between Lusca Versions

= Changes between Squid-2.HEAD and Lusca-1.0 =

  * Squid-2 defaults to use async disk operations for disk read() / open() ; Lusca uses the async disk operations for -all- operations. This improves performance on FreeBSD/Solaris, where write() / close() may block more often than not.
  * Wide-scale source reorganisation into separate libraries - facilitating code modularity, code reuse and much easier unit testing.
  * An IPv4/IPv6 aware socket address type has been added - see libsqinet/ in the top-level source directory.
  * Various core modules have been prepared for IPv6 support - including core networking support and internal DNS routines.
  * An example single-threaded TCP proxy - see app/tcptest/ in the top-level source directory - which demonstrates re-using the core libraries in other applications.

= Changes between Lusca-1.0 and Lusca-HEAD =

  * COSS now does not write out swap log files which it doesn't use - improving performance during normal operation and logfile rotation.
  * The server-side code (src/http.c) has been restructured to remove extra data copying and in preparation for further improvements performance and memory utilisation.
  * The memory caching layer ("MemPools") has been turned into purely statistics - this is in preparation for fully threading the core libraries.
  * The majority of code which uses String has been adapted (and rewritten in some places) in preparation for reference counted string management.

  * The threaded IO code (via aufs) has been turned into a generic library for doing asynchronous IO. The change has removed (for now) some of the automatic thread creation logic - specifically, the number of threads being created does not currently base the choice on how many AUFS and COSS directories are configured. For now, use the "n_aiops_threads" configuration directive to set the number of threads to use. The original code would use 4 threads per AUFS storedir and 3 threads per COSS storedir by default.